{% load static %}
{% static "images" as baseUrl %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'assets/css/styles.css'%}">
    <link rel="stylesheet" href="{% static 'assets/css/Header-Blue.css' %}">
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700">
    <script src="{% static 'assets/js/script1.min.js'%}"></script>
    <link rel="stylesheet" href="{% static 'assets/css/styles.min.css' %}">
</head>

    <title>New Patient Registration</title>


</head>
<body class="bg-gradient-primary" style="background-color: rgb(71,102,190);background-image: url(&quot;{% static 'assets/img/1051-1800x900.jpg'%} &quot;);background-size: cover;">
    <!-- Start: Header Blue -->
    <div>
        <!-- Start: Header -->
        <div class="header-blue" style="padding: 0px;background-color: rgba(255,255,255,0.25);">
            <!-- Start: Navigation Clean -->
            <nav class="navbar navbar-light navbar-expand-lg navigation-clean fixed-top " style="background-color: rgba(0,0,0,0.9);">
                <div class="container">
                    <a href="/" style="width: 4%;"><img class="flex-shrink-1 card-img-top" src="{% static 'assets/img/logo.png'%}" style="width: 95%;"></a>


                    <a class="navbar-brand text-right text-white" id="main_title" href="/home" style="padding-left: 17px;">
                        <strong>POSHAN SAATHI</strong>
                    </a>

                    <button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1" style="background-color: rgba(255,255,255,0.2);">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navcol-1">
                        <ul class="nav navbar-nav shadow-sm d-xl-flex ml-auto" data-toggle="tooltip" data-bs-tooltip="" data-placement="bottom" style="padding: 12px;">


                            <li class="nav-item" role="presentation" style="padding-right: 5px;">
                                <a class="nav-link border rounded border-secondary " href="/event/recent" style="background-color: rgba(255,255,255,0.15);padding: 8px 12px;">EVENTS</a>
                            </li>

                            <li class="nav-item" role="presentation" style="padding-right: 5px;">
                                <a class="nav-link border rounded border-secondary " href="/bmi" style="background-color: rgba(255,255,255,0.15);padding: 8px 12px;">BMI CALCULATOR</a>
                            </li>

                            <li class="nav-item" role="presentation" style="padding-right: 5px;">
                                <a class="nav-link border rounded border-secondary " href="/calorie" style="background-color: rgba(255,255,255,0.15);padding: 8px 12px;">CALORIE CALCULATOR</a>
                            </li>

                           
                            <li class="nav-item" role="presentation" style="padding-right: 5px;">
                                <a class="nav-link border rounded border-secondary " href="/logout" style="background-color: rgba(255,255,255,0.15); padding: 8px 12px;">LOG OUT</a>
                            </li>

                        </ul>
                    </div>
                </div>
            </nav>
            <!-- End: Navigation Clean -->
        </div>
        <!-- End: Header -->
    </div>
  
    <!-- End: Header Blue -->

    
 <div class="container my-3" >
        <div class="card border rounded shadow-lg o-hidden border-0 my-5" >
            <div class="card-body p-0" >
                <div class="row" >
                    <div class="col-lg-12" >
                        <div class="p-5">
                            <div class="text-center" style="margin-top: 5%;">
                                <h4 class="text-dark mb-4" style="padding: 7px;background-color: #f1f4f5;font-size: 25px;filter: blur(0px) brightness(100%);color: #f2f1ec;"><strong><span style="text-decoration: underline;">Patient Registration !</span></strong></h4>
                            </div>

                            <form class="user" action="/registration/new-patient/" method="post" enctype="multipart/form-data">
                                {% csrf_token %}{{form.as_p}}
                                <div class="form-group row"><label><strong>PATIENT'S NAME</strong></label></div>
                                <div class="form-group row">

                                    
                                    <div class="col offset-lg-0">
                                        <label  for="first_name">First Name</label>
                                        <input type="text" id="first_name" class="form-control form-control-user" required name="first_name" placeholder="First Name" />
                                    </div>

                                    <div class="col offset-lg-1">
                                        <label for="middle_name">Middle Name</label>
                                        <input type="text" class="form-control form-control-user" id="middle_name" placeholder="Middle name" name="middle_name" />
                                    </div>
                                    <div class="col offset-lg-1">
                                        <label for="last_name">Last Name</label>
                                        <input type="text" class="form-control form-control-user" id="last_name" placeholder="Last name" required name="last_name"  />
                                    </div>

                                </div>
                                <div class="form-group row">
                                    <div class="col-sm-6 mb-3 mb-sm-0">
                                        <label for="dob"><strong>Date Of Birth</strong></label>
                                        <input type="text" class="form-control form-control-user" id="dob" placeholder="Enter your date of birth" required name="dob"  />
                                    </div>
                                    <div class="col-sm-6">
                                        <label for="gender"><strong>Gender</strong></label>
                                        <input type="text" class="form-control form-control-user" id="gender" placeholder="Gender" required name="gender"  />
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <div class="col-sm-6 mb-3 mb-sm-0">
                                        <label for="age"><strong>Height in centimeter:</strong></label>
                                        <input type="text" class="form-control form-control-user" id="hight" placeholder="Height in Centimeter" required name="hight"  />
                                    </div>
                                    <div class="col-sm-6">
                                        <label for="weight"><strong>Weight : </strong></label>
                                        <input type="text" class="form-control form-control-user" id="weight" placeholder="Weight" required name="weight"  />
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="address"><strong>Address</strong></label>
                                    <input type="text" class="form-control" id="address" placeholder="Enter your address" required name="address" />
                                    
                                </div>

                                <div class="form-group">
                                    <label for="camp_loc"><strong>Camp Location</strong></label>
                                    <input type="text" class="form-control" id="camp_loc" placeholder="Enter your address" required name="camp_loc" />
                                </div>
                                
                                <div class="form-group row">
                                    
                                <div class="col">
                                    <label for="phone"><strong>Phone Number</strong></label>
                                    <input type="text" maxlength="13" class="form-control form-control-user" id="phone" placeholder="Enter your Phone No." required name="phone"  />
                                    
                                </div>
                                <div class="col ">
                                    <label ><strong>Language Prefered</strong></label>
                                <input type="text" maxlength="13" class="form-control form-control-user" id="language" placeholder="Default Language" required name="language"  />
                            </div>
                            </div>
                                

                                <div class="form-group">
                                   
                                    
                                </div>

                              

                                    <label><br><strong>Aadhar Card Number</strong></label>
                                <div class="form-group row">
                                    <div class="col offset-lg-0">
                                        <label for="aadhar1">First 4 Digits of Aadhaar</label>
                                        <input type="text" maxlength="4" id="aadhar1" class="form-control form-control-user" placeholder="First Four Digits" required name="aadhar1"  />
                                    </div>
                                    <div class="col offset-lg-1">
                                        <label for="aadhar2">Middle 4 Digits of Aadhaar</label>
                                        <input type="text" maxlength="4" id="aadhar2" class="form-control form-control-user" placeholder="Middle Four Digits" required name="aadhar2"  />
                                    </div>
                                    <div class="col offset-lg-1">
                                        <label for="aadhar3">Last 4 Digits of Aadhaar</label>
                                        <input type="text" maxlength="4" id="aadhar3" class="form-control form-control-user" placeholder="Last Four Digits" required name="aadhar3"  />
                                    </div>
                                </div>
                                <input type="hidden" id="imurl1" name="imurl1" value="3487">
                                <input type="hidden" id="imurl2" name="imurl2" value="3487">



                                <div class=" text-center align-self-center item" style="height: 90%;" >
                                        <div class="card-group">
                                              
                                                <div class="col-auto col-7" style="background-color: rgba(252,238,238,0.36);margin-left:22%;padding-top: 3%;padding-bottom: 3%;">

                                                    <div class="border rounded shadow box " style="padding: 1%;" >
                                                        <video id="video" width="320" autoplay></video>
                                                    </div>
                                                    

                                                </div>
                                            
                                        </div>
                                        <div class="card-group col-xl-12" >

                                            <div class=" col-xl-6" style="margin-bottom: 0%;">
                                                <div class="" style="background-color: rgba(252,238,238,0.36);max-height:75%; padding-top: 3%;">
                                                    <button class="btn btn-primary text-monospace" id="snap" type="button">Snap Aadhar Photo</button>
                                                    <div class="m-auto " style="padding-top: 3%;padding-bottom: 3%;">
                                                        <canvas id="canvas" width="640" height="480"></canvas>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class=" col-xl-6" style="margin-bottom: 0%;" >
                                                <div class=" m-auto" style="background-color: rgba(252,238,238,0.36); max-height: 75%; padding-top: 3%;">
                                                    <button class="btn btn-primary text-monospace" id="snap1" type="button">Snap Face Photo</button>
                                                    <div class="m-auto " style="padding-top: 3%;padding-bottom: 3%;">
                                                        <canvas id="canvas1" width="640" height="480"></canvas>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                </div>



                                <div className="FormField">
                                    
                                        <button type="submit" value="submit" class="btn btn-primary btn-block text-white btn-user" >Submit</button> 
                                    
                                </div>

                                <!-- Start: 1 Row 1 Column -->
                               
                            </form>
                                
                        
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
</div>












<script>
var video = document.getElementById('video');

// Get access to the camera!
if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
    // Not adding `{ audio: true }` since we only want video now
    navigator.mediaDevices.getUserMedia({ video: true }).then(function(stream) {
        //video.src = window.URL.createObjectURL(stream);
        video.srcObject = stream;
        video.play();
    });
}
var canvas = document.getElementById('canvas');
var canvas1 = document.getElementById('canvas1');
var context = canvas.getContext('2d');
var context1 = canvas1.getContext('2d');
var video = document.getElementById('video');

// Trigger photo take
document.getElementById("snap").addEventListener("click", function() {
    context.drawImage(video, 0, 0, 640, 480);
    var dataURL = canvas.toDataURL();
    document.getElementById('imurl1').setAttribute('value',dataURL.replace(/^data:image\/(png|jpg);base64,/, ""));
    canvas.hight=320;
    canvas.width=428;
    context=canvas.getContext('2d');
    context.drawImage(video, 0, 0, 428, 320);
   });

document.getElementById("snap1").addEventListener("click", function() {
    context1.drawImage(video, 0, 0, 640, 480);
    var dataURL1 = canvas1.toDataURL();
    document.getElementById('imurl2').setAttribute('value',dataURL1.replace(/^data:image\/(png|jpg);base64,/, ""));
    document.getElementById('canvas1').src = dataURL1;
    canvas1.hight=320;
    canvas1.width=428;
    context1=canvas1.getContext('2d');
    context1.drawImage(video, 0, 0, 428, 320);
});


</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
</body>
</html>
